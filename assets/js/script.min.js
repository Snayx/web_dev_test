var loginForm = document.getElementById("login-form"),
    body = document.getElementsByTagName("body")[0];
function showLogin() {
    (loginForm.style.display = "block"), (body.style.overflow = "hidden");
}
function hideLogin() {
    (loginForm.style.display = "none"), (body.style.overflow = "auto");
}
function toggleMenu() {
    document.querySelector(".side-menu").classList.toggle("show");
    document.querySelector(".side-menu").classList.toggle('open');
}
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');

loginForm.addEventListener('submit', async (event) => {
  event.preventDefault();
  
  const email = emailInput.value;
  const password = passwordInput.value;

  const response = await fetch('/login', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ email, password })
  });

  if (response.status === 200) {
    window.location.href = '/';
    hideLoginButton();
  } else {
    alert('Invalid email or password!');
  }
});
const loginBtn = document.getElementById('login-button');
const profilePic = document.getElementById('profile-div');

function toggleDropdown() {
  var dropdown = document.getElementById("profile-dropdown");
  dropdown.classList.toggle("active");
}
function hideLoginButton() {
  loginBtn.style.display = 'none';
}

function showProfilePic(){
    profilePic.style.display = 'block';
}

async function checkLoginStatus() {
  try {
    const response = await fetch('/status');
    const data = await response.json();
    
    if (data.loggedIn) {
      hideLoginButton();
      showProfilePic();
    } else {
      loginBtn.style.display = 'block';
      rofilePic.style.display = 'none';
    }
  } catch (err) {
    console.error(err);
  }
}
checkLoginStatus();
    